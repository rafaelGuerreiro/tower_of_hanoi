!function(t,e,n){"use strict";function r(t,e){return s(t)?new gt:t instanceof Node||t instanceof NodeList?new gt(t):s(e)&&(t instanceof gt||t instanceof mt)?new gt(t):e instanceof gt||e instanceof mt?e.find(t):h(e)?Ct.find(e).find(t):Ct.find(t)}function i(t){console&&"function"==typeof console.log&&console.log(t)}function o(t){return Array.prototype.slice.call(t,0)}function s(t){return!t||("string"==typeof t&&(t=t.trim()),!t)}function a(t){return!s(t)}function h(t){return"string"==typeof t&&a(t)}function u(t){return a(t)&&"function"==typeof t}function c(t){if(!u(t))return this;for(var e=0;e<this.length;e++){var n=t.call(this[e],e,this);if(n===!1)break}return this}function f(t){u(t)||(t=function(){return this});for(var e=[],n=0;n<this.length;n++)e.push(t.call(this[n],n,this));return e}function p(t,e,n){if(!u(n))return this;var r=t.split(/\s+/g);return this instanceof mt?l.call(this,r,e,n,d):this.each(function(){l.call(this,r,e,n,d)})}function l(t,e,n,r){var i=this,o=i.node;return t.each(function(){o instanceof Node&&o.addEventListener(this,function(t){r.call(i,t,e,n)})}),this}function d(t,e,n){var r=new mt(t.target);g(r,e,n,t,this)}function y(t,e){if(!u(e))return this;var t=t.split(/\s+/g);return this instanceof mt?l.call(this,t,n,e,v):this.each(function(){l.call(this,t,n,e,v)})}function v(t,e,n){m(this,n,t,this)}function g(t,e,n,r,i){if(!t.matches(e)){if(t.matches("body"))return;return g(t.parent(),e,n,r,i)}m(t,n,r,i)}function m(t,e,n,r){var i=e.call(t,n,r);i===!1&&(n.preventDefault(),n.stopPropagation())}function w(e){return h(e)?this instanceof mt?(e=C(e),t.createEvent?this.node.dispatchEvent(e):this.node.fireEvent("on"+e.eventType,e),this):this.each(function(){this.trigger(e)}):this}function C(e){var n;return t.createEvent?(n=t.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):(n=t.createEventObject(),n.eventType=e),n.eventName=e,n}function N(t){return this instanceof mt?this.matches(t)?new gt(this):this.matches("body")?new gt:this.parent().closest(t):new gt(this.map(function(){return this.closest(t)}))}function A(t){return h(t)||(t="*"),new gt(this instanceof mt?this.node.querySelectorAll(t):this.map(function(){return this.find(t)}))}function b(t){return"number"!=typeof t||0===this.length?n:(t%=this.length,t<0&&(t=this.length+t),this[t])}function S(t){if(!h(t))return!1;var e=!0;return this.each(function(){return e&&this.matches(t)}),e}function E(t){if(!h(t))return!1;var e=this.node.matches||this.node.webkitMatchesSelector||this.node.mozMatchesSelector||this.node.msMatchesSelector||this.node.oMatchesSelector;return e?e.call(this.node,t):void 0}function L(){return this instanceof gt?this.map().flatten():this.reduce(function(t,e){var n=e;return u(e.flatten)&&(n=e.flatten()),t.concat(n)},[])}function x(t,e){if(e===n)return n;if(!u(t))return e;for(var r=0;r<this.length;r++)e=t(e,this[r],r,this);return e}function T(){if(0===arguments.length)return this;for(var t=0;t<arguments.length;t++)for(var e=arguments[t],n=0;n<this.length;n++)e===this[n]&&this.splice(n,1);return this}function B(t){if(!h(t))return this;var e=[];return this.each(function(){this.matches(t)&&e.push(this)}),new gt(e)}function $(t){if(!h(t))return this;if(this instanceof mt){var e=I(t),n=this;return n.styleNames.each(function(){e.remove(this)}),e.length>0&&e.each(function(){n.styleNames.push(this)}),_.call(this)}return this.each(function(){this.addClass(t)})}function D(t){if(!h(t))return this;if(this instanceof mt){var e=I(t),n=this;return e.each(function(){n.styleNames.remove(this)}),_.call(this)}return this.each(function(){this.removeClass(t)})}function M(t,e){if(!h(t))return this;if(this instanceof mt){var n=I(t),r=this,i=e===!0||e===!1;return n.each(function(){var t=r.hasClass(this);i&&(t=!e),t?r.removeClass(this):r.addClass(this)}),this}return this.each(function(){this.toggleClass(t,e)})}function H(t){if(!h(t))return!1;if(this instanceof mt){var e=I(t),n=this;return e.reduce(function(t,e){return t&&n.styleNames.indexOf(e)>-1},!0)}return this.map(function(){return this.hasClass(t)}).reduce(function(t,e){return t&&e},!0)}function I(t){return t===n?n:t.toLowerCase().split(/\s+/g)}function _(){return this.node.className=this.styleNames.join(" "),this}function j(){return new mt(this.node.parentNode)}function O(t,e){return this instanceof mt?h(t)?e===n?this._data[t]:R.call(this,t,e):this._data:this.map(function(){return this.data(t,e)})}function P(t){if(this instanceof mt){var e=this._data[t];return e!==n&&(this._data[t]=n),e}return this.map(function(){return this.removeData(t)})}function R(t,e){return this instanceof mt?h(t)?e===n?P.call(this,t):(G(this.node,t,e),e=k(e),this._data[t]=e,e):n:this.map(function(){return this.setData(t,e)})}function k(t){return"string"!=typeof t?t:z(t)||J(t)?JSON.parse(t):U(t)?"true"===t:q(t)?Number(t):t}function z(t){return t.match(/^\[.*?\]$/g)}function J(t){return t.match(/^\{.*?\}$/g)}function U(t){return t.match(/^(true|false)$/g)}function q(t){return t.match(/^[\+\-]?\d+\.?\d*$/g)}function F(t){if(t||(t=[]),t instanceof NodeList)return t;if(t instanceof gt)return t.flatten();Array.isArray(t)||(t=[t]);for(var e=[],n=0;n<t.length;n++){var r=V(t[n]);if(Array.isArray(r)||r instanceof NodeList)for(var i=0;i<r.length;i++)e.push(r[i])}return e}function V(e){if(e instanceof Node)return[e];if(e instanceof NodeList)return e;if(e instanceof mt)return[e.node];if(e instanceof gt)return e.flatten();if(s(e))return n;var r=t.createElement("div");return r.innerHTML=e,r.childNodes}function Z(t){var e=t.attributes;if(e===n)return{};for(var r={},i=0;i<e.length;i++){var o=e[i];o.name.match(/^data\-[a-z0-9\-]*$/gi)&&(r[K(o.name)]=k(o.value))}return r}function G(t,e,n){e="data-"+Q(e),("object"==typeof n||Array.isArray(n))&&(n=JSON.stringify(n)),t.setAttribute(e,n)}function K(t){return W(t.substring("data-".length))}function Q(t){return t=t.replace(/([A-Z]+)/g,"-$1"),t.match(/^[\-].*$/g)&&(t=t.substring(1)),t.toLowerCase()}function W(t){var e=t.toLowerCase().split("-");if(1===e.length)return e[0];for(var n=1;n<e.length;n++)e[n]=X(e[n]);return e.join("")}function X(t){return t.length<=1?t.toUpperCase():t.substring(0,1).toUpperCase()+t.substring(1)}function Y(){for(var t=this.parent().children(),e=t.length,n=0;n<e;n++)if(t.get(n).node===this.node)return n;return-1}function tt(){var t=o(arguments);if(this instanceof mt){var e=t.length;if(0===e)return this;var n=this.node;return new gt(t).each(function(){n.appendChild(this.node)}),this}return this.each(function(){this.append.apply(this,t)})}function et(){var t=o(arguments);if(this instanceof mt){var e=t.length;if(0===e)return this;var n=this;return new gt(t).each(function(){rt(n,this.node)}),this}return this.each(function(){this.prepend.apply(this,t)})}function nt(){var t=o(arguments);if(this instanceof mt){var e=t.length;if(0===e)return this;var n=this,r=n.parent();return new gt(t).each(function(){rt(r,this.node,n.index())}),this}return this.each(function(){this.insertBefore.apply(this,t)})}function rt(t,e,n){var r=t.children(),i=null;r.length>0&&(i=r.get(n||0).node),t.node.insertBefore(e,i)}function it(){var t=o(arguments);if(this instanceof mt){var e=t.length;if(0===e)return this;var n=this,r=n.parent();return new gt(t).each(function(){ot(r,this.node,n.index())}),this}return this.each(function(){this.insertAfter.apply(this,t)})}function ot(t,e,n){var r=t.children(),i=null;r.length>0&&(i=r.get(n||0).node),t.node.insertAfter(e,i)}function st(t){if(this instanceof mt){h(t)||(t="*");for(var e=this.node.children||this.node.childNodes,n=[],r=0;r<e.length;r++){var i=new mt(e[r]);i.matches(t)&&n.push(i)}return new gt(n)}return new gt(this.map(function(){return this.children(t)}))}function at(t){return this instanceof mt?(h(t)||(t=""),this.node.innerHTML=t,this):new gt(this.map(function(){return this.setInnerHtml(t)}))}function ht(t){return this instanceof mt?(h(t)||(t=""),this.node.innerText=""+t,this):new gt(this.map(function(){return this.setInnerText(t)}))}function ut(t){return this instanceof mt?t===n?this.node.value:(this.node.value=t,this):new gt(this.map(function(){return this.val(t)}))}function ct(){return this instanceof mt?(this.node.remove(),this):this.each(function(){this.remove()})}function ft(){return this instanceof mt?(this.node.focus(),this):(this.length>0&&this[0].focus(),this)}function pt(){return this instanceof mt?(this.node.blur(),this):(this.length>0&&this[0].focus(),this)}function lt(t,e){return this instanceof mt?(e===!1?this.node.removeAttribute(t):(e===!0&&(e=t),this.node.setAttribute(t,e)),this):this.each(function(){this.attr(t,e)})}function dt(t,n){function r(){return this.style(t,n)}if(this instanceof mt){var i=e.getComputedStyle(this.node);return s(n)?i.getPropertyValue(t):(isNaN(n)||(n+="px"),this.node.style[t]=n,this)}return s(n)?this.map(r):this.each(r)}function yt(t){return this instanceof mt?(this.node.style[t]="",this):this.each(function(){this.removeStyle(t)})}function vt(t){if(this instanceof mt){var e=this.node.getBoundingClientRect();return h(t)?e[t]:e}return this.map(function(){return this.getBoundingClientRect(t)})}function gt(t){var e=F(t);this.length=e.length;for(var n=0;n<e.length;n++){var r=e[n];r instanceof mt&&(r=r.node),this[n]=new mt(r)}}function mt(t){this.node=t,this._data=Z(t),this.styleNames=I(t.className)}Array.prototype.each=c,Array.prototype.map=f,Array.prototype.flatten=L,Array.prototype.reduce=x,Array.prototype.remove=T;var wt=r;wt.isEmpty=s,wt.isPresent=a,wt.isStringPresent=h,wt.isFunction=u,wt.argumentsAsArray=o,wt.log=i,e.$=wt;var Ct=new mt(t.body);gt.prototype.each=c,gt.prototype.map=f,gt.prototype.live=p,gt.prototype.on=y,gt.prototype.trigger=w,gt.prototype.get=b,gt.prototype.find=A,gt.prototype.children=st,gt.prototype.match=S,gt.prototype.flatten=L,gt.prototype.filter=B,gt.prototype.closest=N,gt.prototype.val=ut,gt.prototype.addClass=$,gt.prototype.removeClass=D,gt.prototype.toggleClass=M,gt.prototype.hasClass=H,gt.prototype.data=O,gt.prototype.removeData=P,gt.prototype.setData=R,gt.prototype.prepend=et,gt.prototype.insertBefore=nt,gt.prototype.insertAfter=it,gt.prototype.append=tt,gt.prototype.remove=ct,gt.prototype.setInnerHtml=at,gt.prototype.setInnerText=ht,gt.prototype.focus=ft,gt.prototype.blur=pt,gt.prototype.attr=lt,gt.prototype.style=dt,gt.prototype.removeStyle=yt,gt.prototype.getBoundingClientRect=vt,mt.prototype.matches=E,mt.prototype.find=A,mt.prototype.live=p,mt.prototype.on=y,mt.prototype.trigger=w,mt.prototype.children=st,mt.prototype.closest=N,mt.prototype.val=ut,mt.prototype.addClass=$,mt.prototype.removeClass=D,mt.prototype.toggleClass=M,mt.prototype.hasClass=H,mt.prototype.parent=j,mt.prototype.data=O,mt.prototype.removeData=P,mt.prototype.setData=R,mt.prototype.index=Y,mt.prototype.prepend=et,mt.prototype.insertBefore=nt,mt.prototype.insertAfter=it,mt.prototype.append=tt,mt.prototype.remove=ct,mt.prototype.setInnerHtml=at,mt.prototype.setInnerText=ht,mt.prototype.focus=ft,mt.prototype.blur=pt,mt.prototype.attr=lt,mt.prototype.style=dt,mt.prototype.removeStyle=yt,mt.prototype.getBoundingClientRect=vt}(document,window);
!function(t,e,s,i){"use strict";function a(){var e=!0;S.find(".player-setup").each(function(){var s={};s.id=this.data("id"),s.name=this.find(".player-name").get(0).val(),s.tiles=this.find(".tiles-amount").get(0).val(),s.type=this.find(".player-type").get(0).val();var i=!1;return"human"===s.type&&(i=[l(this.find(".shortcut-0").get(0).val()),l(this.find(".shortcut-1").get(0).val()),l(this.find(".shortcut-2").get(0).val())]),0!==this.find(".has-error").length?(e=!1,!1):(s.shortcuts=i,void t.game.addPlayer(s))}),e&&(t.user.initialize(),w.addClass("hide"),t(".game-main-container").removeClass("hide"))}function n(){var e="has-error",s=[];S.find(".shortcut").each(function(){this.closest("label").removeClass(e),this.closest(".shortcut-definition-container").hasClass("hide")||s.push({shortcut:this.val(),element:this})}),s.each(function(s,i){for(var a=0;a<i.length;a++)if(a!==s){var n=i[a];this.shortcut===n.shortcut?(this.element.closest("label").addClass(e),n.element.closest("label").addClass(e)):t.isEmpty(this.shortcut)&&this.element.closest("label").addClass(e)}})}function l(e){return t.isStringPresent(e)?e.trim().substring(0,1):""}function o(t){x++,S.find(".new-player-box").insertBefore(u(t)),x>=b&&S.find(".new-player-box").addClass("hide"),S.find('.player-setup[data-id="'+t.id+'"] .player-name').focus()}function r(){return x--,t(this).closest(".setup-selection-container").remove(),x<b&&S.find(".new-player-box").removeClass("hide"),f(),!1}function c(){S.append(h())}function u(t){var e=['<div class="player-setup" data-id="',t.id,'">','<fieldset><div class="row">','<label class="col-xs-12"><input type="text" class="player-name form-control" placeholder="Player name" /></label>','<label class="col-xs-6"><select class="tiles-amount form-control">'];t.hideCloseButton||e.splice(0,0,'<button class="close" tabindex="-1">&times;</button>');for(var s=y;s<=g;s++)e.push('<option value="'),e.push(s),e.push('">'),e.push(s),e.push(" tiles</option>");return e.push("</select></label>"),e.push('<label class="col-xs-6"><select class="player-type form-control">'),[{id:"human",text:"Human",hasShortcut:!0},{id:"easy",text:"Computer (easy)",hasShortcut:!1},{id:"medium",text:"Computer (medium)",hasShortcut:!1},{id:"hard",text:"Computer (hard)",hasShortcut:!1},{id:"impossible",text:"Computer (impossible)",hasShortcut:!1}].each(function(){e.push('<option value="'),e.push(this.id),e.push('" data-has-shortcut="'),e.push(this.hasShortcut),e.push('">'),e.push(this.text),e.push("</option>")}),e.push("</select></label></div>"),e.push('<div class="shortcut-definition-container"><hr /><div class="row"><div class="col-xs-12">Shortcuts</div>'),["First","Second","Third"].each(function(s){e.push('<label class="shortcut-definition col-xs-4"><span class="control-label">'),e.push(this),e.push('<span class="hidden-sm"> column</span></span>'),e.push('<input type="text" maxlength="1" class="form-control shortcut shortcut-'),e.push(s),e.push('" data-column="'),e.push(s),e.push('" value="'),e.push(t.shortcuts[s]),e.push('" /></label>')}),e.push("</div></div></fieldset></div>"),d(e)}function h(){return d(['<div class="add-new-player-box">','<div class="add-new-player-helper-text">Add second player.</div>','<div class="add-new-player-plus-sign"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></div>',"</div>"],"new-player-box")}function d(t,e){e!==i&&null!==e&&0!==e.length||(e="");var s=['<div class="setup-selection-container col-xs-12 col-sm-6 ',e,'">',"</div>"];return Array.prototype.splice.apply(s,[s.length-1,0].concat(t)),s.join("")}function p(){var t=this.val(),e=this.find('option[value="'+t+'"]').data("hasShortcut")[0];this.closest("fieldset").find(".shortcut-definition-container").toggleClass("hide",!e)}function f(){var t=m();w.find(".init-game").attr("disabled",!t)}function v(t){var e=m();w.find(".init-game").attr("disabled",!e),e&&13===t.which&&w.find(".init-game").trigger("click")}function m(){var e=!0;return S.find(".player-setup input, .player-setup select").each(function(){var s=this.closest("label").toggleClass("has-error",t.isEmpty(this.val()));return e=e&&!s.hasClass("has-error")}),e}var y=3,g=9,b=2,x=0,C=t(e.body).get(0),w=t(".game-setup"),S=w.find(".game-setup-container").get(0);!function(){c(),o({hideCloseButton:!0,id:0,shortcuts:[1,2,3]}),S.live("click",".add-new-player-box",function(){o({hideCloseButton:!1,id:1,shortcuts:["i","o","p"]}),f()}),S.live("click",".setup-selection-container .close",r),S.live("change",".setup-selection-container .player-type",p),S.live("change",".player-setup input, .player-setup select",f),S.live("keyup",".player-setup input",v),S.live("change",".shortcut",n),C.live("click",".init-game",a)}()}($,document,window);
!function(e,t,i,n){"use strict";function a(){S={},j=!1,A=!1}function s(){var t=e(".play-controller").attr("disabled",!1);t.hasClass("pause")&&t.trigger("click"),e.timer.quit(),e.movement.quit(),e.computer.quit(),a(),e(".game-main-container, .game-winner").addClass("hide"),P.setInnerHtml(""),e(".game-setup").removeClass("hide")}function l(){if(this.blur(),!this.matches('[disabled="disabled"]')){var e=this.hasClass("play");this.toggleClass("play pause btn-success btn-warning"),j=e,R(e?"play":"pause")}}function o(e){c(e)}function c(e){if(e.tiles=Number(e.tiles),!(isNaN(e.tiles)||e.tiles>9||e.tiles<3)){r(e);var t=S[e.id],i=t.root,n=t.board;i.find(".tile").each(function(e){var t=this.parent(),i=t.data("column");n[i].splice(e,0,{nodes:{tile:this,column:t},tile:e,column:i})})}}function r(t){P.append(u(t));var i={player:t,board:[[],[],[]],activeTile:null,queue:[],animating:!1,root:e(".game-container").find('.game-board[data-id="'+t.id+'"]').closest(".game-board-container").get(0)};"human"===t.type?e.user.register(i):e.computer.register(i),S[t.id]=i}function u(e){for(var t=['<div class="game-board-container"><div class="row">','<h3 class="col-xs-8">',d(e.name),'</h3><div class="col-xs-4 moves">Moves: <span class="moves-counter">0</span></div></div>','<div class="game-board" data-id="',e.id,'">'],i=0;i<3;i++){if(t.push('<div class="column-container"><div class="column" data-column="'),t.push(i),t.push('">'),0===i)for(var n=0;n<e.tiles;n++)t.push('<div class="tile tile-'),t.push(n+1),t.push('" data-tile="'),t.push(n),t.push('"></div>');t.push('</div><div class="tile-base"></div>'),e.shortcuts&&(t.push('<div class="shortcut"><span class="label label-success">'),t.push(d(e.shortcuts[i])),t.push("</span></div>")),t.push("</div>")}return t.push("</div></div>"),t.join("")}function d(e){var i=t.createElement("div");return i.innerText=e,i.innerHTML}function v(e,t,i){j&&(h(t)||p(e,t,i))}function f(e,t,i,n){j&&(h(t)||h(i)||m(e,t,i,n))}function h(e){return"number"!=typeof e||e>2||e<0}function m(e,t,i,n){var a={index:t,invokeNext:!1,callback:function(){g(e,{index:i,invokeNext:!0,callback:n})}};e.animating?e.queue.push(a):g(e,a)}function p(e,t,i){var n={index:t,invokeNext:!0,callback:i};e.animating?e.queue.push(n):g(e,n)}function g(e,t){var i=t.index,n=t.invokeNext,a=t.callback,s=e.root.find(".column").get(i);e.activeTile?e.activeTile.column===i?b(e,n,a):T(e,s,i,n,a):y(e,s,i,n,a)}function y(e,t,i,n,a){var s=t.find(".tile").get(0);if(s){var l=e.board[i][0];s.addClass("active animating");var t=l.nodes.column,o={left:k(s,t,"left","width"),top:25};s.style("left",o.left),C(e,l,o,n,function(){e.activeTile=l},a)}}function b(e,t,i){var n=e.activeTile.nodes.tile,a=e.activeTile.nodes.column,s={left:k(n,a,"left","width"),top:k(n,a,"top")};C(e,e.activeTile,s,t,function(){n.removeClass("active animating").removeStyle("top"),e.activeTile=null},i)}function T(e,t,i,n,a){if(q(e,i)){var s=e.activeTile,l=s.nodes.tile,o={left:k(l,t,"left","width"),top:k(l,t,"top")};C(e,e.activeTile,o,n,function(){e.board[s.column].remove(s),e.board[i].splice(0,0,s),s.column=i,s.nodes.column=t;var n=s.nodes.tile;t.prepend(n.removeStyle("left")),n.removeClass("active animating").removeStyle("top"),e.activeTile=null,R("move",e)},a)}}function k(e,t,i,n){var a=0;if("string"==typeof n){var s=e.getBoundingClientRect(n)/2;a=t.getBoundingClientRect(n)/2-s}var l=t.getBoundingClientRect(i),o=e.closest(".column-container").get(0).getBoundingClientRect(i);return l-o+a}function C(e,t,i,n){e.animating=!0;var a={},s={},l={},o=0,c=t.nodes.tile,r=c.closest(".column-container").get(0),u=Object.keys(i).each(function(){a[this]=c.getBoundingClientRect(this)-r.getBoundingClientRect(this),a[this]+=w(c.style("margin-"+this)),s[this]=a[this],l[this]=w(i[this])-w(a[this]),o+=Math.abs(l[this])});o=Math.floor(o/u.length),o>25&&(o=25),u.each(function(){l[this]=l[this]/o});var d=Array.prototype.slice.call(arguments,4),v=setInterval(function(){var t=!1;u.each(function(){var e=l[this];s[this]+=e,c.style(this,s[this]),t=t||e>0&&i[this]<=s[this]||e<0&&i[this]>=s[this]}),(t||A)&&(clearInterval(v),x(e,d,n))},2)}function x(e,t,i){if(e.animating=!1,Array.isArray(t))for(var n=0;n<t.length;n++){var a=t[n];"function"==typeof a&&a(e)}i&&N(e)}function w(e){return isNaN(e)?"string"==typeof e?w(e.replace(/[^\d|\.]/gi,"")):0:Number(e)}function N(e){if(0!==e.queue.length){var t=e.queue.shift();g(e,t)}}function q(e,t){var i=e.board[t];return 0===i.length||e.activeTile.tile<i[0].tile}function B(t,i){return e.isStringPresent(t)&&"function"==typeof i?Object.keys(I).indexOf(t)<0?e.game:(I[t].push(i),e.game):e.game}function R(t){if(!e.isStringPresent(t))return e.game;if(Object.keys(I).indexOf(t)<0)return e.game;var n=Array.prototype.slice.call(arguments,1);return I[t].each(function(){try{return this.apply(i,n)}catch(t){e.log(t)}}),e.game}function M(t){t.board[2].length!==t.player.tiles||A||(e(".play-controller").trigger("click").attr("disabled",!0),A=!0,O(t))}function O(t){var i=e(".game-winner").removeClass("hide");i.find(".game-winner-name").setInnerText(t.player.name)}var S,j,A;e.game={addPlayer:o,selectTile:v,atomicMoveTile:f,listen:B};var I={play:[],pause:[],move:[M],win:[]},P=e(".game-container");!function(){a(),e(t).live("click",".play-controller",l).live("click",".quit",s)}()}($,document,window);
!function(n,t,e,r){"use strict";function i(){l(),s=0,o()}function u(){if(null===m){var n=o;n(),m=setInterval(n,v)}}function l(){null!==m&&(clearInterval(m),m=null)}function o(){c.setInnerText(a(s)),s+=v}function a(n){var t=f(3,n%1e3),e=f(2,Math.floor(n/1e3)%60),r=f(2,Math.floor(n/1e3/60));return[r,":",e,".",t].join("")}function f(n,t){if(t>=100&&3===n||t>=10&&2===n)return t;var e=n-(""+t).length;t=[t];for(var r=0;r<e;r++)t.splice(0,0,"0");return t.join("")}n.timer={quit:i};var c=n(".timer").get(0),s=0,v=25,m=null;!function(){n.game.listen("play",u).listen("pause",l)}()}($,document,window);
!function(e,n,o,t){"use strict";function u(){e(".moves-counter").setInnerText("0")}function c(e){e.move===t&&(e.move={counter:0}),e.move.counter++,m(e)}function m(e){e.root.find(".moves-counter").setInnerText(""+e.move.counter)}e.movement={quit:u},function(){e.game.listen("move",c)}()}($,document,window);
!function(n,t,i,e){"use strict";function o(){s=null}function c(){null===s&&(s={__:n(".play-controller").get(0)},n(t).on("keyup",a))}function r(n){"human"===n.player.type&&(n.root.live("click",".column-container",f(n)),u(n))}function u(n){c(),n.player.shortcuts.each(function(t){var i=l(this);s[i]=n.root.find(".column").get(t)})}function l(n){return" "===n?"__":"_"+n.substring(0,1).toLowerCase().replace(/[^0-9a-zA-Z]/gi,"$")}function a(n){if(null!==s){var t=String.fromCharCode(n.which),i=l(t);Object.keys(s).indexOf(i)!==-1&&s[i].trigger("click")}}function f(t){return function(){var i=this.find(".column").get(0).data("column");n.game.selectTile(t,i)}}var s=null;n.user={quit:o,initialize:c,register:r}}($,document,window);
!function(e,t,i,n){"use strict";function r(){Object.keys(d).each(function(){clearTimeout(d[this])}),d={}}function o(t){t.computer={direction:t.player.tiles%2===0?1:-1,moveFirstTile:!0,difficulty:t.player.type,interval:s(t.player.type)},e.game.listen("play",u(t)),e.game.listen("pause",p(t))}function u(e){return function(){p(e)(),c(e)}}function c(e){d[e.player.id]=setTimeout(function(){a(e)},e.computer.interval)}function a(t){var i=[];t.computer.moveFirstTile?l(t,i):m(t,i),e.game.atomicMoveTile(t,i[0],i[1],function(){t.computer.moveFirstTile=!t.computer.moveFirstTile,c(t)})}function l(e,t){var i=f(e.board);if(!(i<0)){t[0]=i;var n=(i+e.computer.direction)%3;n<0&&(n=3+n),t[1]=n}}function f(e){for(var t=0;t<e.length;t++)if(e[t].length>0&&0===e[t][0].tile)return t;return-1}function m(e,t){var i=v(e.board);t[0]=i[0],t[1]=i[1]}function v(e){for(var t=[],i=0,n=0;n<e.length;n++){var r=e[n];0!==r.length&&0===r[0].tile||(t[i++]={index:n,tile:0===r.length?Number.MAX_VALUE:r[0].tile})}if(t[0].tile>t[1].tile){var o=t[0];t[0]=t[1],t[1]=o}return[t[0].index,t[1].index]}function p(e){return function(){var t=d[e.player.id];t!==n&&clearTimeout(t)}}function s(e){var t=125;return"easy"===e?10*t:"medium"===e?6*t:"hard"===e?4*t:t}var d={};e.computer={quit:r,register:o}}($,document,window);
