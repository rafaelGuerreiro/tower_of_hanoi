!function(t,n,e){"use strict";function i(t,n){return h(t)?new mt:t instanceof Node||t instanceof NodeList?new mt(t):h(n)&&(t instanceof mt||t instanceof yt)?new mt(t):n instanceof mt||n instanceof yt?n.find(t):a(n)?Ct.find(n).find(t):Ct.find(t)}function s(t){console&&"function"==typeof console.log&&console.log(t)}function r(t){return Array.prototype.slice.call(t,0)}function h(t){return!t||("string"==typeof t&&(t=t.trim()),!t)}function o(t){return!h(t)}function a(t){return"string"==typeof t&&o(t)}function u(t){return o(t)&&"function"==typeof t}function c(t){if(!u(t))return this;for(var n=0;n<this.length;n++){var e=t.call(this[n],n,this);if(e===!1)break}return this}function f(t){u(t)||(t=function(){return this});for(var n=[],e=0;e<this.length;e++)n.push(t.call(this[e],e,this));return n}function l(t,n,e){if(!u(e))return this;var i=t.split(/\s+/g);return this instanceof yt?d.call(this,i,n,e,v):this.each(function(){d.call(this,i,n,e,v)})}function d(t,n,e,i){var s=this,r=s.node;return t.each(function(){r instanceof Node&&r.addEventListener(this,function(t){i.call(s,t,n,e)})}),this}function v(t,n,e){var i=new yt(t.target);m(i,n,e,t,this)}function p(t,n){if(!u(n))return this;var t=t.split(/\s+/g);return this instanceof yt?d.call(this,t,e,n,g):this.each(function(){d.call(this,t,e,n,g)})}function g(t,n,e){y(this,e,t,this)}function m(t,n,e,i,s){if(!t.matches(n)){if(t.matches("body"))return;return m(t.parent(),n,e,i,s)}y(t,e,i,s)}function y(t,n,e,i){var s=n.call(t,e,i);s===!1&&(e.preventDefault(),e.stopPropagation())}function w(n){return a(n)?this instanceof yt?(n=C(n),t.createEvent?this.node.dispatchEvent(n):this.node.fireEvent("on"+n.eventType,n),this):this.each(function(){this.trigger(n)}):this}function C(n){var e;return t.createEvent?(e=t.createEvent("HTMLEvents"),e.initEvent(n,!0,!0)):(e=t.createEventObject(),e.eventType=n),e.eventName=n,e}function N(t){return this instanceof yt?this.matches(t)?new mt(this):this.matches("body")?new mt:this.parent().closest(t):new mt(this.map(function(){return this.closest(t)}))}function A(t){return a(t)||(t="*"),new mt(this instanceof yt?this.node.querySelectorAll(t):this.map(function(){return this.find(t)}))}function b(t){return"number"!=typeof t||0===this.length?e:(t%=this.length,t<0&&(t=this.length+t),this[t])}function S(t){if(!a(t))return!1;var n=!0;return this.each(function(){return n&&this.matches(t)}),n}function E(t){if(!a(t))return!1;var n=this.node.matches||this.node.webkitMatchesSelector||this.node.mozMatchesSelector||this.node.msMatchesSelector||this.node.oMatchesSelector;return n?n.call(this.node,t):void 0}function L(){return this instanceof mt?this.map().flatten():this.reduce(function(t,n){var e=n;return u(n.flatten)&&(e=n.flatten()),t.concat(e)},[])}function x(t,n){if(n===e)return e;if(!u(t))return n;for(var i=0;i<this.length;i++)n=t(n,this[i],i,this);return n}function T(){if(0===arguments.length)return this;for(var t=0;t<arguments.length;t++)for(var n=arguments[t],e=0;e<this.length;e++)n===this[e]&&this.splice(e,1);return this}function B(t){if(!a(t))return this;var n=[];return this.each(function(){this.matches(t)&&n.push(this)}),new mt(n)}function $(t){if(!a(t))return this;if(this instanceof yt){var n=I(t),e=this;return e.styleNames.each(function(){n.remove(this)}),n.length>0&&n.each(function(){e.styleNames.push(this)}),_.call(this)}return this.each(function(){this.addClass(t)})}function D(t){if(!a(t))return this;if(this instanceof yt){var n=I(t),e=this;return n.each(function(){e.styleNames.remove(this)}),_.call(this)}return this.each(function(){this.removeClass(t)})}function M(t,n){if(!a(t))return this;if(this instanceof yt){var e=I(t),i=this,s=n===!0||n===!1;return e.each(function(){var t=i.hasClass(this);s&&(t=!n),t?i.removeClass(this):i.addClass(this)}),this}return this.each(function(){this.toggleClass(t,n)})}function H(t){if(!a(t))return!1;if(this instanceof yt){var n=I(t),e=this;return n.reduce(function(t,n){return t&&e.styleNames.indexOf(n)>-1},!0)}return this.map(function(){return this.hasClass(t)}).reduce(function(t,n){return t&&n},!0)}function I(t){return t===e?e:t.toLowerCase().split(/\s+/g)}function _(){return this.node.className=this.styleNames.join(" "),this}function j(){return new yt(this.node.parentNode)}function O(t,n){return this instanceof yt?a(t)?n===e?this._data[t]:R.call(this,t,n):this._data:this.map(function(){return this.data(t,n)})}function P(t){if(this instanceof yt){var n=this._data[t];return n!==e&&(this._data[t]=e),n}return this.map(function(){return this.removeData(t)})}function R(t,n){return this instanceof yt?a(t)?n===e?P.call(this,t):(G(this.node,t,n),n=k(n),this._data[t]=n,n):e:this.map(function(){return this.setData(t,n)})}function k(t){return"string"!=typeof t?t:z(t)||J(t)?JSON.parse(t):U(t)?"true"===t:q(t)?Number(t):t}function z(t){return t.match(/^\[.*?\]$/g)}function J(t){return t.match(/^\{.*?\}$/g)}function U(t){return t.match(/^(true|false)$/g)}function q(t){return t.match(/^[\+\-]?\d+\.?\d*$/g)}function F(t){if(t||(t=[]),t instanceof NodeList)return t;if(t instanceof mt)return t.flatten();Array.isArray(t)||(t=[t]);for(var n=[],e=0;e<t.length;e++){var i=V(t[e]);if(Array.isArray(i)||i instanceof NodeList)for(var s=0;s<i.length;s++)n.push(i[s])}return n}function V(n){if(n instanceof Node)return[n];if(n instanceof NodeList)return n;if(n instanceof yt)return[n.node];if(n instanceof mt)return n.flatten();if(h(n))return e;var i=t.createElement("div");return i.innerHTML=n,i.childNodes}function Z(t){var n=t.attributes;if(n===e)return{};for(var i={},s=0;s<n.length;s++){var r=n[s];r.name.match(/^data\-[a-z0-9\-]*$/gi)&&(i[K(r.name)]=k(r.value))}return i}function G(t,n,e){n="data-"+Q(n),("object"==typeof e||Array.isArray(e))&&(e=JSON.stringify(e)),t.setAttribute(n,e)}function K(t){return W(t.substring("data-".length))}function Q(t){return t=t.replace(/([A-Z]+)/g,"-$1"),t.match(/^[\-].*$/g)&&(t=t.substring(1)),t.toLowerCase()}function W(t){var n=t.toLowerCase().split("-");if(1===n.length)return n[0];for(var e=1;e<n.length;e++)n[e]=X(n[e]);return n.join("")}function X(t){return t.length<=1?t.toUpperCase():t.substring(0,1).toUpperCase()+t.substring(1)}function Y(){for(var t=this.parent().children(),n=t.length,e=0;e<n;e++)if(t.get(e).node===this.node)return e;return-1}function tt(){var t=r(arguments);if(this instanceof yt){var n=t.length;if(0===n)return this;var e=this.node;return new mt(t).each(function(){e.appendChild(this.node)}),this}return this.each(function(){this.append.apply(this,t)})}function nt(){var t=r(arguments);if(this instanceof yt){var n=t.length;if(0===n)return this;var e=this;return new mt(t).each(function(){it(e,this.node)}),this}return this.each(function(){this.prepend.apply(this,t)})}function et(){var t=r(arguments);if(this instanceof yt){var n=t.length;if(0===n)return this;var e=this,i=e.parent();return new mt(t).each(function(){it(i,this.node,e.index())}),this}return this.each(function(){this.insertBefore.apply(this,t)})}function it(t,n,e){var i=t.children(),s=null;i.length>0&&(s=i.get(e||0).node),t.node.insertBefore(n,s)}function st(){var t=r(arguments);if(this instanceof yt){var n=t.length;if(0===n)return this;var e=this,i=e.parent();return new mt(t).each(function(){rt(i,this.node,e.index())}),this}return this.each(function(){this.insertAfter.apply(this,t)})}function rt(t,n,e){var i=t.children(),s=null;i.length>0&&(s=i.get(e||0).node),t.node.insertAfter(n,s)}function ht(t){if(this instanceof yt){a(t)||(t="*");for(var n=this.node.children||this.node.childNodes,e=[],i=0;i<n.length;i++){var s=new yt(n[i]);s.matches(t)&&e.push(s)}return new mt(e)}return new mt(this.map(function(){return this.children(t)}))}function ot(t){return this instanceof yt?(a(t)||(t=""),this.node.innerHTML=t,this):new mt(this.map(function(){return this.setInnerHtml(t)}))}function at(t){return this instanceof yt?(a(t)||(t=""),this.node.innerText=""+t,this):new mt(this.map(function(){return this.setInnerText(t)}))}function ut(t){return this instanceof yt?t===e?this.node.value:(this.node.value=t,this):new mt(this.map(function(){return this.val(t)}))}function ct(){return this instanceof yt?(this.node.remove(),this):this.each(function(){this.remove()})}function ft(){return this instanceof yt?(this.node.focus(),this):(this.length>0&&this[0].focus(),this)}function lt(){return this instanceof yt?(this.node.blur(),this):(this.length>0&&this[0].focus(),this)}function dt(t,n){return this instanceof yt?(n===!1?this.node.removeAttribute(t):(n===!0&&(n=t),this.node.setAttribute(t,n)),this):this.each(function(){this.attr(t,n)})}function vt(t,e){function i(){return this.style(t,e)}if(this instanceof yt){var s=n.getComputedStyle(this.node);return h(e)?s.getPropertyValue(t):(isNaN(e)||(e+="px"),this.node.style[t]=e,this)}return h(e)?this.map(i):this.each(i)}function pt(t){return this instanceof yt?(this.node.style[t]="",this):this.each(function(){this.removeStyle(t)})}function gt(t){if(this instanceof yt){var n=this.node.getBoundingClientRect();return a(t)?n[t]:n}return this.map(function(){return this.getBoundingClientRect(t)})}function mt(t){var n=F(t);this.length=n.length,this.each=c,this.map=f,this.live=l,this.on=p,this.trigger=w,this.get=b,this.find=A,this.children=ht,this.match=S,this.flatten=L,this.filter=B,this.closest=N,this.val=ut,this.addClass=$,this.removeClass=D,this.toggleClass=M,this.hasClass=H,this.data=O,this.removeData=P,this.setData=R,this.prepend=nt,this.insertBefore=et,this.insertAfter=st,this.append=tt,this.remove=ct,this.setInnerHtml=ot,this.setInnerText=at,this.focus=ft,this.blur=lt,this.attr=dt,this.style=vt,this.removeStyle=pt,this.getBoundingClientRect=gt;for(var e=0;e<n.length;e++){var i=n[e];i instanceof yt&&(i=i.node),this[e]=new yt(i)}}function yt(t){this.node=t,this._data=Z(t),this.matches=E,this.find=A,this.live=l,this.on=p,this.trigger=w,this.children=ht,this.closest=N,this.val=ut,this.styleNames=I(t.className),this.addClass=$,this.removeClass=D,this.toggleClass=M,this.hasClass=H,this.parent=j,this.data=O,this.removeData=P,this.setData=R,this.index=Y,this.prepend=nt,this.insertBefore=et,this.insertAfter=st,this.append=tt,this.remove=ct,this.setInnerHtml=ot,this.setInnerText=at,this.focus=ft,this.blur=lt,this.attr=dt,this.style=vt,this.removeStyle=pt,this.getBoundingClientRect=gt}Array.prototype.each=c,Array.prototype.map=f,Array.prototype.flatten=L,Array.prototype.reduce=x,Array.prototype.remove=T;var wt=i;wt.isEmpty=h,wt.isPresent=o,wt.isStringPresent=a,wt.isFunction=u,wt.argumentsAsArray=r,wt.log=s,n.$=wt;var Ct=new yt(t.body)}(document,window);
!function(t,e,s,i){"use strict";function n(){var e=!0;S.find(".player-setup").each(function(){var s={};s.id=this.data("id"),s.name=this.find(".player-name").get(0).val(),s.tiles=this.find(".tiles-amount").get(0).val(),s.type=this.find(".player-type").get(0).val();var i=!0,n=!1;return"human"===s.type&&(n=[l(this.find(".shortcut-0").get(0).val()),l(this.find(".shortcut-1").get(0).val()),l(this.find(".shortcut-2").get(0).val())],i=a(s.id,n,this.find(".shortcut"))),i?(s.shortcuts=n,void t.game.addPlayer(s)):(e=!1,!1)}),e&&(t.user.initialize(),C.addClass("hide"),t(".game-main-container").removeClass("hide"))}function a(t,e,s){return!0}function l(e){return t.isStringPresent(e)?e.trim().substring(0,1):""}function o(t){x++,S.find(".new-player-box").insertBefore(c(t)),x>=b&&S.find(".new-player-box").addClass("hide"),S.find('.player-setup[data-id="'+t.id+'"] .player-name').focus()}function r(){return x--,t(this).closest(".setup-selection-container").remove(),x<b&&S.find(".new-player-box").removeClass("hide"),f(),!1}function u(){S.append(d())}function c(t){var e=['<div class="player-setup" data-id="',t.id,'">','<fieldset><div class="row">','<label class="col-xs-12"><input type="text" class="player-name form-control" placeholder="Player name" /></label>','<label class="col-xs-6"><select class="tiles-amount form-control">'];t.hideCloseButton||e.splice(0,0,'<button class="close" tabindex="-1">&times;</button>');for(var s=y;s<=g;s++)e.push('<option value="'),e.push(s),e.push('">'),e.push(s),e.push(" tiles</option>");return e.push("</select></label>"),e.push('<label class="col-xs-6"><select class="player-type form-control">'),[{id:"human",text:"Human",hasShortcut:!0},{id:"easy",text:"Computer (easy)",hasShortcut:!1},{id:"medium",text:"Computer (medium)",hasShortcut:!1},{id:"hard",text:"Computer (hard)",hasShortcut:!1},{id:"impossible",text:"Computer (impossible)",hasShortcut:!1}].each(function(){e.push('<option value="'),e.push(this.id),e.push('" data-has-shortcut="'),e.push(this.hasShortcut),e.push('">'),e.push(this.text),e.push("</option>")}),e.push("</select></label></div>"),e.push('<div class="shortcut-definition-container"><hr /><div class="row"><div class="col-xs-12">Shortcuts</div>'),["First","Second","Third"].each(function(s){e.push('<label class="shortcut-definition col-xs-4">'),e.push(this),e.push(' column<input type="text" maxlength="1" class="form-control shortcut shortcut-'+s+'" data-column="'),e.push(s),e.push('" value="'),e.push(t.shortcuts[s]),e.push('" /></label>')}),e.push("</div></div></fieldset></div>"),p(e)}function d(){return p(['<div class="add-new-player-box">','<div class="add-new-player-helper-text">Add second player.</div>','<div class="add-new-player-plus-sign"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></div>',"</div>"],"new-player-box")}function p(t,e){e!==i&&null!==e&&0!==e.length||(e="");var s=['<div class="setup-selection-container col-xs-12 col-sm-6 ',e,'">',"</div>"];return Array.prototype.splice.apply(s,[s.length-1,0].concat(t)),s.join("")}function h(){var t=this.val(),e=this.find('option[value="'+t+'"]').data("hasShortcut")[0];this.closest("fieldset").find(".shortcut-definition-container").toggleClass("hide",!e)}function f(){var t=m();C.find(".init-game").attr("disabled",!t)}function v(t){var e=m();C.find(".init-game").attr("disabled",!e),e&&13===t.which&&C.find(".init-game").trigger("click")}function m(){var e=!0;return S.find(".player-setup input, .player-setup select").each(function(){return e=e&&t.isPresent(this.val())}),e}var y=3,g=9,b=2,x=0,w=t(e.body).get(0),C=t(".game-setup"),S=C.find(".game-setup-container").get(0);!function(){u(),o({hideCloseButton:!0,id:0,shortcuts:[1,2,3]}),S.live("click",".add-new-player-box",function(){o({hideCloseButton:!1,id:1,shortcuts:["i","o","p"]}),f()}),S.live("click",".setup-selection-container .close",r),S.live("change",".setup-selection-container .player-type",h),S.live("change",".player-setup input, .player-setup select",f),S.live("keyup",".player-setup input",v),w.live("click",".init-game",n)}()}($,document,window);
!function(e,t,i,n){"use strict";function a(){O={},S=!1,j=!1}function s(){var t=e(".play-controller").attr("disabled",!1);t.hasClass("pause")&&t.trigger("click"),e.timer.quit(),e.movement.quit(),e.computer.quit(),a(),e(".game-main-container").addClass("hide"),I.setInnerHtml(""),e(".game-setup").removeClass("hide")}function l(){if(this.blur(),!this.matches('[disabled="disabled"]')){var e=this.hasClass("play");this.toggleClass("play pause btn-success btn-warning"),S=e,R(e?"play":"pause")}}function o(e){c(e)}function c(e){if(e.tiles=Number(e.tiles),!(isNaN(e.tiles)||e.tiles>9||e.tiles<3)){r(e);var t=O[e.id],i=t.root,n=t.board;i.find(".tile").each(function(e){var t=this.parent(),i=t.data("column");n[i].splice(e,0,{nodes:{tile:this,column:t},tile:e,column:i})})}}function r(t){I.append(u(t));var i={player:t,board:[[],[],[]],activeTile:null,queue:[],animating:!1,root:e(".game-container").find('.game-board[data-id="'+t.id+'"]').closest(".game-board-container").get(0)};"human"===t.type?e.user.register(i):e.computer.register(i),O[t.id]=i}function u(e){for(var t=['<div class="game-board-container"><div class="row">','<h3 class="col-xs-8">',d(e.name),'</h3><div class="col-xs-4 moves">Moves: <span class="moves-counter">0</span></div></div>','<div class="game-board" data-id="',e.id,'">'],i=0;i<3;i++){if(t.push('<div class="column-container"><div class="column" data-column="'),t.push(i),t.push('">'),0===i)for(var n=0;n<e.tiles;n++)t.push('<div class="tile tile-'),t.push(n+1),t.push('" data-tile="'),t.push(n),t.push('"></div>');t.push('</div><div class="tile-base"></div>'),e.shortcuts&&(t.push('<div class="shortcut"><span class="label label-success">'),t.push(d(e.shortcuts[i])),t.push("</span></div>")),t.push("</div>")}return t.push("</div></div>"),t.join("")}function d(e){var i=t.createElement("div");return i.innerText=e,i.innerHTML}function v(e,t,i){S&&(h(t)||p(e,t,i))}function f(e,t,i,n){S&&(h(t)||h(i)||m(e,t,i,n))}function h(e){return"number"!=typeof e||e>2||e<0}function m(e,t,i,n){var a={index:t,invokeNext:!1,callback:function(){g(e,{index:i,invokeNext:!0,callback:n})}};e.animating?e.queue.push(a):g(e,a)}function p(e,t,i){var n={index:t,invokeNext:!0,callback:i};e.animating?e.queue.push(n):g(e,n)}function g(e,t){var i=t.index,n=t.invokeNext,a=t.callback,s=e.root.find(".column").get(i);e.activeTile?e.activeTile.column===i?b(e,n,a):T(e,s,i,n,a):y(e,s,i,n,a)}function y(e,t,i,n,a){var s=t.find(".tile").get(0);if(s){var l=e.board[i][0];s.addClass("active animating");var t=l.nodes.column,o={left:k(s,t,"left","width"),top:25};s.style("left",o.left),C(e,l,o,n,function(){e.activeTile=l},a)}}function b(e,t,i){var n=e.activeTile.nodes.tile,a=e.activeTile.nodes.column,s={left:k(n,a,"left","width"),top:k(n,a,"top")};C(e,e.activeTile,s,t,function(){n.removeClass("active animating").removeStyle("top"),e.activeTile=null},i)}function T(e,t,i,n,a){if(w(e,i)){var s=e.activeTile,l=s.nodes.tile,o={left:k(l,t,"left","width"),top:k(l,t,"top")};C(e,e.activeTile,o,n,function(){e.board[s.column].remove(s),e.board[i].splice(0,0,s),s.column=i,s.nodes.column=t;var n=s.nodes.tile;t.prepend(n.removeStyle("left")),n.removeClass("active animating").removeStyle("top"),e.activeTile=null,R("move",e)},a)}}function k(e,t,i,n){var a=0;if("string"==typeof n){var s=e.getBoundingClientRect(n)/2;a=t.getBoundingClientRect(n)/2-s}var l=t.getBoundingClientRect(i),o=e.closest(".column-container").get(0).getBoundingClientRect(i);return l-o+a}function C(e,t,i,n){e.animating=!0;var a={},s={},l={},o=0,c=t.nodes.tile,r=c.closest(".column-container").get(0),u=Object.keys(i).each(function(){a[this]=c.getBoundingClientRect(this)-r.getBoundingClientRect(this),a[this]+=N(c.style("margin-"+this)),s[this]=a[this],l[this]=N(i[this])-N(a[this]),o+=Math.abs(l[this])});o=Math.floor(o/u.length),o>25&&(o=25),u.each(function(){l[this]=l[this]/o});var d=Array.prototype.slice.call(arguments,4),v=setInterval(function(){var t=!1;u.each(function(){var e=l[this];s[this]+=e,c.style(this,s[this]),t=t||e>0&&i[this]<=s[this]||e<0&&i[this]>=s[this]}),(t||j)&&(clearInterval(v),x(e,d,n))},2)}function x(e,t,i){if(e.animating=!1,Array.isArray(t))for(var n=0;n<t.length;n++){var a=t[n];"function"==typeof a&&a(e)}i&&q(e)}function N(e){return isNaN(e)?"string"==typeof e?N(e.replace(/[^\d|\.]/gi,"")):0:Number(e)}function q(e){if(0!==e.queue.length){var t=e.queue.shift();g(e,t)}}function w(e,t){var i=e.board[t];return 0===i.length||e.activeTile.tile<i[0].tile}function B(t,i){return e.isStringPresent(t)&&"function"==typeof i?Object.keys(A).indexOf(t)<0?e.game:(A[t].push(i),e.game):e.game}function R(t){if(!e.isStringPresent(t))return e.game;if(Object.keys(A).indexOf(t)<0)return e.game;var n=Array.prototype.slice.call(arguments,1);return A[t].each(function(){try{return this.apply(i,n)}catch(t){e.log(t)}}),e.game}function M(t){t.board[2].length!==t.player.tiles||j||(e(".play-controller").trigger("click").attr("disabled",!0),console.log(t.player.name+" won!"),j=!0)}var O,S,j;e.game={addPlayer:o,selectTile:v,atomicMoveTile:f,listen:B};var A={play:[],pause:[],move:[M],win:[]},I=e(".game-container");!function(){a(),e(t).live("click",".play-controller",l).live("click",".quit",s)}()}($,document,window);
!function(n,t,e,r){"use strict";function i(){l(),s=0,o()}function u(){if(null===m){var n=o;n(),m=setInterval(n,v)}}function l(){null!==m&&(clearInterval(m),m=null)}function o(){c.setInnerText(a(s)),s+=v}function a(n){var t=f(3,n%1e3),e=f(2,Math.floor(n/1e3)%60),r=f(2,Math.floor(n/1e3/60));return[r,":",e,".",t].join("")}function f(n,t){if(t>=100&&3===n||t>=10&&2===n)return t;var e=n-(""+t).length;t=[t];for(var r=0;r<e;r++)t.splice(0,0,"0");return t.join("")}n.timer={quit:i};var c=n(".timer").get(0),s=0,v=25,m=null;!function(){n.game.listen("play",u).listen("pause",l)}()}($,document,window);
!function(e,n,o,t){"use strict";function u(){e(".moves-counter").setInnerText("0")}function c(e){e.move===t&&(e.move={counter:0}),e.move.counter++,m(e)}function m(e){e.root.find(".moves-counter").setInnerText(""+e.move.counter)}e.movement={quit:u},function(){e.game.listen("move",c)}()}($,document,window);
!function(n,t,i,e){"use strict";function o(){s=null}function c(){null===s&&(s={__:n(".play-controller").get(0)},n(t).on("keyup",a))}function r(n){"human"===n.player.type&&(n.root.live("click",".column-container",f(n)),u(n))}function u(n){c(),n.player.shortcuts.each(function(t){var i=l(this);s[i]=n.root.find(".column").get(t)})}function l(n){return" "===n?"__":"_"+n.substring(0,1).toLowerCase().replace(/[^0-9a-zA-Z]/gi,"$")}function a(n){if(null!==s){var t=String.fromCharCode(n.which),i=l(t);Object.keys(s).indexOf(i)!==-1&&s[i].trigger("click")}}function f(t){return function(){var i=this.find(".column").get(0).data("column");n.game.selectTile(t,i)}}var s=null;n.user={quit:o,initialize:c,register:r}}($,document,window);
!function(e,t,i,n){"use strict";function r(){Object.keys(d).each(function(){clearTimeout(d[this])}),d={}}function o(t){t.computer={direction:t.player.tiles%2===0?1:-1,moveFirstTile:!0,difficulty:t.player.type,interval:s(t.player.type)},e.game.listen("play",u(t)),e.game.listen("pause",p(t))}function u(e){return function(){p(e)(),c(e)}}function c(e){d[e.player.id]=setTimeout(function(){a(e)},e.computer.interval)}function a(t){var i=[];t.computer.moveFirstTile?l(t,i):m(t,i),e.game.atomicMoveTile(t,i[0],i[1],function(){t.computer.moveFirstTile=!t.computer.moveFirstTile,c(t)})}function l(e,t){var i=f(e.board);if(!(i<0)){t[0]=i;var n=(i+e.computer.direction)%3;n<0&&(n=3+n),t[1]=n}}function f(e){for(var t=0;t<e.length;t++)if(e[t].length>0&&0===e[t][0].tile)return t;return-1}function m(e,t){var i=v(e.board);t[0]=i[0],t[1]=i[1]}function v(e){for(var t=[],i=0,n=0;n<e.length;n++){var r=e[n];0!==r.length&&0===r[0].tile||(t[i++]={index:n,tile:0===r.length?Number.MAX_VALUE:r[0].tile})}if(t[0].tile>t[1].tile){var o=t[0];t[0]=t[1],t[1]=o}return[t[0].index,t[1].index]}function p(e){return function(){var t=d[e.player.id];t!==n&&clearTimeout(t)}}function s(e){var t=125;return"easy"===e?10*t:"medium"===e?6*t:"hard"===e?4*t:t}var d={};e.computer={quit:r,register:o}}($,document,window);
